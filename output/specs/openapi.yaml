openapi: 3.0.0
info:
  title: My Application API
  version: 1.0.0
  description: RESTful API for managing users, products, and orders
servers:
  -
    url: "https://api.example.com/v1"
    description: API Server
paths:
  /users:
    get:
      summary: List all users
      tags:
        - "users"
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number
        -
          name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Items per page
      responses:
        200:
          description: List of users
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/user"
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
    post:
      summary: Create a new user
      tags:
        - "users"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/userInput"
      responses:
        201:
          description: user created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
        400:
          $ref: "#/components/responses/ValidationError"
  /users/{id}:
    get:
      summary: Get a user by ID
      tags:
        - "users"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: user ID
      responses:
        200:
          description: user details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
        404:
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update a user
      tags:
        - "users"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: user ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/userInput"
      responses:
        200:
          description: user updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/user"
        400:
          $ref: "#/components/responses/ValidationError"
        404:
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete a user
      tags:
        - "users"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: user ID
      responses:
        204:
          description: user deleted successfully
        404:
          $ref: "#/components/responses/NotFound"
  /products:
    get:
      summary: List all products
      tags:
        - "products"
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number
        -
          name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Items per page
      responses:
        200:
          description: List of products
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/product"
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
    post:
      summary: Create a new product
      tags:
        - "products"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/productInput"
      responses:
        201:
          description: product created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product"
        400:
          $ref: "#/components/responses/ValidationError"
  /products/{id}:
    get:
      summary: Get a product by ID
      tags:
        - "products"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: product ID
      responses:
        200:
          description: product details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product"
        404:
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update a product
      tags:
        - "products"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: product ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/productInput"
      responses:
        200:
          description: product updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/product"
        400:
          $ref: "#/components/responses/ValidationError"
        404:
          $ref: "#/components/responses/NotFound"
    delete:
      summary: Delete a product
      tags:
        - "products"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: product ID
      responses:
        204:
          description: product deleted successfully
        404:
          $ref: "#/components/responses/NotFound"
  /orders:
    get:
      summary: List all orders
      tags:
        - "orders"
      parameters:
        -
          name: page
          in: query
          schema:
            type: integer
            default: 1
          description: Page number
        -
          name: limit
          in: query
          schema:
            type: integer
            default: 10
          description: Items per page
      responses:
        200:
          description: List of orders
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/order"
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
    post:
      summary: Create a new order
      tags:
        - "orders"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/orderInput"
      responses:
        201:
          description: order created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/order"
        400:
          $ref: "#/components/responses/ValidationError"
  /orders/{id}:
    get:
      summary: Get a order by ID
      tags:
        - "orders"
      parameters:
        -
          name: id
          in: path
          required: true
          schema:
            type: string
          description: order ID
      responses:
        200:
          description: order details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/order"
        404:
          $ref: "#/components/responses/NotFound"
components:
  schemas:
    user:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier
          example: 123e4567-e89b-12d3-a456-426614174000
        email:
          type: string
          format: email
          description: User email address
          example: user@example.com
        firstName:
          type: string
          description: User first name
          example: John
        lastName:
          type: string
          description: User last name
          example: Doe
        age:
          type: integer
          description: User age
          example: 30
        role:
          type: string
          description: User role
          example: user
          enum:
            - "admin"
            - "user"
            - "guest"
        isActive:
          type: boolean
          description: Whether the user account is active
          example: true
        createdAt:
          type: string
          format: date-time
          description: Account creation timestamp
          example: "2024-01-15T10:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: Last update timestamp
          example: "2024-01-20T14:45:00Z"
      required:
        - "id"
        - "email"
        - "firstName"
        - "lastName"
        - "role"
        - "createdAt"
        - "updatedAt"
    userInput:
      type: object
      properties:
        email:
          type: string
          format: email
          description: User email address
          example: user@example.com
        firstName:
          type: string
          description: User first name
          example: John
        lastName:
          type: string
          description: User last name
          example: Doe
        age:
          type: integer
          description: User age
          example: 30
        role:
          type: string
          description: User role
          example: user
          enum:
            - "admin"
            - "user"
            - "guest"
        isActive:
          type: boolean
          description: Whether the user account is active
          example: true
      required:
        - "email"
        - "firstName"
        - "lastName"
        - "role"
    product:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Product ID
          example: 987fcdeb-51a2-43f1-b456-123456789012
        name:
          type: string
          description: Product name
          example: Premium Widget
        description:
          type: string
          description: Product description
          example: A high-quality widget for all your needs
        price:
          type: number
          description: Product price in USD
          example: 29.99
        stock:
          type: integer
          description: Available stock quantity
          example: 100
        category:
          type: string
          description: Product category
          example: electronics
          enum:
            - "electronics"
            - "clothing"
            - "food"
            - "books"
            - "other"
        tags:
          type: array
          description: Product tags
          example:
            - "featured"
            - "sale"
            - "new"
          items:
            type: string
        inStock:
          type: boolean
          description: Whether product is in stock
          example: true
        createdAt:
          type: string
          format: date-time
          description: Product creation timestamp
      required:
        - "id"
        - "name"
        - "price"
        - "stock"
        - "category"
        - "inStock"
        - "createdAt"
    productInput:
      type: object
      properties:
        name:
          type: string
          description: Product name
          example: Premium Widget
        description:
          type: string
          description: Product description
          example: A high-quality widget for all your needs
        price:
          type: number
          description: Product price in USD
          example: 29.99
        stock:
          type: integer
          description: Available stock quantity
          example: 100
        category:
          type: string
          description: Product category
          example: electronics
          enum:
            - "electronics"
            - "clothing"
            - "food"
            - "books"
            - "other"
        tags:
          type: array
          description: Product tags
          example:
            - "featured"
            - "sale"
            - "new"
          items:
            type: string
        inStock:
          type: boolean
          description: Whether product is in stock
          example: true
      required:
        - "name"
        - "price"
        - "stock"
        - "category"
        - "inStock"
    order:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: Order ID
        userId:
          type: string
          format: uuid
          description: ID of the user who placed the order
        productIds:
          type: array
          description: Array of product IDs in this order
          items:
            type: string
        totalAmount:
          type: number
          description: Total order amount
          example: 149.97
        status:
          type: string
          description: Order status
          example: pending
          enum:
            - "pending"
            - "processing"
            - "shipped"
            - "delivered"
            - "cancelled"
        shippingAddress:
          type: object
          description: Shipping address details
        orderDate:
          type: string
          format: date-time
          description: Order placement date
      required:
        - "id"
        - "userId"
        - "productIds"
        - "totalAmount"
        - "status"
        - "shippingAddress"
        - "orderDate"
    orderInput:
      type: object
      properties:
        userId:
          type: string
          format: uuid
          description: ID of the user who placed the order
        productIds:
          type: array
          description: Array of product IDs in this order
          items:
            type: string
        totalAmount:
          type: number
          description: Total order amount
          example: 149.97
        status:
          type: string
          description: Order status
          example: pending
          enum:
            - "pending"
            - "processing"
            - "shipped"
            - "delivered"
            - "cancelled"
        shippingAddress:
          type: object
          description: Shipping address details
      required:
        - "userId"
        - "productIds"
        - "totalAmount"
        - "status"
        - "shippingAddress"
  responses:
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
    ValidationError:
      description: Validation error
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              details:
                type: array
                items:
                  type: object
